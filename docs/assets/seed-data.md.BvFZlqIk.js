import{_ as e,c as s,o as i,ag as t}from"./chunks/framework.1L-BeKqY.js";const k=JSON.parse('{"title":"See Data for Development","description":"","frontmatter":{},"headers":[],"relativePath":"seed-data.md","filePath":"seed-data.md"}'),n={name:"seed-data.md"};function l(o,a,h,d,r,p){return i(),s("div",null,a[0]||(a[0]=[t(`<h1 id="see-data-for-development" tabindex="-1">See Data for Development <a class="header-anchor" href="#see-data-for-development" aria-label="Permalink to &quot;See Data for Development&quot;">​</a></h1><p>In Brut, <em>seed data</em> is data you set up for the purposes of doing local development. It is <em>not</em> for managing production data and is not used for tests.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Seed data lives in <code>app/src/back_end/data_models/seed</code>. You can create as many files in here as you like. Each should contain a class that extends <a href="/api/Brut/BackEnd/SeedData.html" target="_self" rel="noopener" data-no-router><code>Brut::BackEnd::SeedData</code></a> and implements <code>seed!</code>. By doing this, the class is regsitered with Brut and when you run <code>bin/db seed</code> all the classes are created and <code>seed!</code> is called.</p><p>FactoryBot will be set up for you, so you can call <code>FactoryBot.create</code> to create the data.</p><p>For example, here is how we might create two accounts, one deactivated, in the same organization:</p><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># app/src/back_end/data_models/seed/all_seed_data.rb</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AllSeedData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Brut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BackEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SeedData</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  include</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FactoryBot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Syntax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Methods</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> seed!</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    organization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     = </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:organization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    active_account</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   = </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:account</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                              organization:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                              email:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pat@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    inactive_account</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:account</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:inactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                              organization:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                              email:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;chris@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>You can store other data here, such as a CSV, if you want to load data organized in another way. Seed data will only ever be loaded in development, so you can organize it however you like.</p><h2 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h2><p>You do not need to test your seed data. Presumably, you will be using your app in development, and this will be sufficient to determine if your seed data is fit for purpose.</p><h2 id="recommended-practices" tabindex="-1">Recommended Practices <a class="header-anchor" href="#recommended-practices" aria-label="Permalink to &quot;Recommended Practices&quot;">​</a></h2><ul><li>Use FactoryBot as this is consistent with your tests</li><li>Use literal values for anything relevant to local development. In the example above, the two email addresses are important, presumably because you&#39;d be using those to login. The organization name, however, is irrelevant, so we allow Faker to come up with a name.</li><li>Use local variables as documentation. In the example above, there&#39;s no need to set <code>active_account</code> or <code>inactive_account</code>, but doing so makes it clear what those objects are for.</li><li>Ensure all seed data classes are independent from one another, as the order of their exeuction cannot be guaranteed.</li></ul><h2 id="technical-notes" tabindex="-1">Technical Notes <a class="header-anchor" href="#technical-notes" aria-label="Permalink to &quot;Technical Notes&quot;">​</a></h2><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p>Technical Notes are for deeper understanding and debugging. While we will try to keep them up-to-date with changes to Brut&#39;s internals, the source code is always more correct.</p></div><p><em>Last Updated May 8, 2025</em></p><p>All seed data is loaded in one transaction. This means that if any class&#39; seed data fails, no data will be written.</p><p>Seed data also is not assumed to be idempotent. If you run it twice, you will likely get an error. Because <a href="/database-schema.html#ephemeral-dev-database">your dev database is ephemeral</a>, you can always recreate your dev database via <code>bin/db rebuild &amp;&amp; bin/db seed</code>.</p>`,17)]))}const u=e(n,[["render",l]]);export{k as __pageData,u as default};
