<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Brut::CLI::Executor
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Brut::CLI::Executor";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Brut.html" title="Brut (module)">Brut</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../CLI.html" title="Brut::CLI (module)">CLI</a></span></span>
     &raquo; 
    <span class="title">Executor</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Brut::CLI::Executor
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Brut::CLI::Executor</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/brut/cli/executor.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <ul>
<li>Assumes spawned commands should succeed, raising an error if they do not.</li>
</ul>



  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(out:, err:)  &#x21d2; Executor </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create the executor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#system-instance_method" title="#system (instance method)">#<strong>system</strong>(*args)  &#x21d2; int </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Execute a command, logging it to the standard output and outputing the  commands output and error to the standard output and error, respectively.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#system!-instance_method" title="#system! (instance method)">#<strong>system!</strong>(*args)  &#x21d2; int </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Execute a command, logging it to the standard output and outputing the  commands output and error to the standard output and error, respectively.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(out:, err:)  &#x21d2; <tt><span class='object_link'><a href="" title="Brut::CLI::Executor (class)">Executor</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create the executor</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>out</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Output.html" title="Brut::CLI::Output (class)">Brut::CLI::Output</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>an IO used to send messages to the standard output</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>err</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Output.html" title="Brut::CLI::Output (class)">Brut::CLI::Output</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>an IO used to send messages to the standard error</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/brut/cli/executor.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>out:</span><span class='comma'>,</span><span class='label'>err:</span><span class='rparen'>)</span>
  <span class='ivar'>@out</span> <span class='op'>=</span> <span class='id identifier rubyid_out'>out</span>
  <span class='ivar'>@err</span> <span class='op'>=</span> <span class='id identifier rubyid_err'>err</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="system-instance_method">
  
    #<strong>system</strong>(*args)  &#x21d2; <tt>int</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Execute a command, logging it to the standard output and outputing the
commands output and error to the standard output and error, respectively. If
the command exits nonzero, the exit status is returned.</p>

<p>Generally, you want to use <span class='object_link'><a href="#system!-instance_method" title="Brut::CLI::Executor#system! (method)">#system!</a></span> for commands that must succeed
for the caller to continue.  Only use this method if you need
to do special error-handling when the underlying command fails.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>String|Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whatever you would give to <code>Kernel#system</code> or <code>Open3.popen3</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>int</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>0 if the command completed normally, otherwise the nonzero exit status. <strong>DO NOT TREAT THIS AS A BOOLEAN VALUE</strong></p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://docs.ruby-lang.org/en/3.3/Open3.html#method-c-popen3" target="_parent" title="https://docs.ruby-lang.org/en/3.3/Open3.html#method-c-popen3">https://docs.ruby-lang.org/en/3.3/Open3.html#method-c-popen3</a></li>
    
      <li><span class='object_link'><a href="#system!-instance_method" title="Brut::CLI::Executor#system! (method)">#system!</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/brut/cli/executor.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_system!'>system!</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='int'>0</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../../Brut.html" title="Brut (module)">Brut</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../CLI.html" title="Brut::CLI (module)">CLI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="SystemExecError.html" title="Brut::CLI::SystemExecError (class)">SystemExecError</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_exit_status'>exit_status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="system!-instance_method">
  
    #<strong>system!</strong>(*args)  &#x21d2; <tt>int</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Execute a command, logging it to the standard output and outputing the
commands output and error to the standard output and error, respectively. If
the command exits nonzero, an exception is raised and your CLI app will
also exit nonzero.</p>

<p>If you need to handle  the command exiting nonzero, use <span class='object_link'><a href="#system-instance_method" title="Brut::CLI::Executor#system (method)">#system</a></span>
instead, as it will not raise an exception.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>String|Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whatever you would give to <code>Kernel#system</code> or <code>Open3.popen3</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>int</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Always returns 0</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Brut::CLI::Error::SystemExecError if the spawed command exits nonzero</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://docs.ruby-lang.org/en/3.3/Open3.html#method-c-popen3" target="_parent" title="https://docs.ruby-lang.org/en/3.3/Open3.html#method-c-popen3">https://docs.ruby-lang.org/en/3.3/Open3.html#method-c-popen3</a></li>
    
      <li><span class='object_link'><a href="#system-instance_method" title="Brut::CLI::Executor#system (method)">#system</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/brut/cli/executor.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_system!'>system!</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='ivar'>@out</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Executing </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_args'>args</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_wait_thread'>wait_thread</span> <span class='op'>=</span> <span class='const'>Open3</span><span class='period'>.</span><span class='id identifier rubyid_popen3'>popen3</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__stdin'>_stdin</span><span class='comma'>,</span><span class='id identifier rubyid_stdout'>stdout</span><span class='comma'>,</span><span class='id identifier rubyid_stderr'>stderr</span><span class='comma'>,</span><span class='id identifier rubyid_wait_thread'>wait_thread</span><span class='op'>|</span>
    <span class='id identifier rubyid_o'>o</span> <span class='op'>=</span> <span class='id identifier rubyid_stdout'>stdout</span><span class='period'>.</span><span class='id identifier rubyid_read_nonblock'>read_nonblock</span><span class='lparen'>(</span><span class='int'>10</span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='period'>.</span><span class='id identifier rubyid_read_nonblock'>read_nonblock</span><span class='lparen'>(</span><span class='int'>10</span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_o'>o</span> <span class='op'>||</span> <span class='id identifier rubyid_e'>e</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_o'>o</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_o'>o</span> <span class='op'>!=</span> <span class='symbol'>:wait_readable</span>
          <span class='ivar'>@out</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_o'>o</span>
          <span class='ivar'>@out</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_o'>o</span> <span class='op'>=</span> <span class='id identifier rubyid_stdout'>stdout</span><span class='period'>.</span><span class='id identifier rubyid_read_nonblock'>read_nonblock</span><span class='lparen'>(</span><span class='int'>10</span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='kw'>false</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_e'>e</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_e'>e</span> <span class='op'>!=</span> <span class='symbol'>:wait_readable</span>
          <span class='ivar'>@err</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_e'>e</span>
          <span class='ivar'>@err</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='period'>.</span><span class='id identifier rubyid_read_nonblock'>read_nonblock</span><span class='lparen'>(</span><span class='int'>10</span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='kw'>false</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_wait_thread'>wait_thread</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_wait_thread'>wait_thread</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>
    <span class='ivar'>@out</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_args'>args</span><span class='embexpr_end'>}</span><span class='tstring_content'> succeeded</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../Brut.html" title="Brut (module)">Brut</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../CLI.html" title="Brut::CLI (module)">CLI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="SystemExecError.html" title="Brut::CLI::SystemExecError (class)">SystemExecError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="SystemExecError.html#initialize-instance_method" title="Brut::CLI::SystemExecError#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span><span class='id identifier rubyid_wait_thread'>wait_thread</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_exitstatus'>exitstatus</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Sep 29 20:49:37 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.6).
</div>

    </div>
  </body>
</html>