<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: I18nTranslation.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: I18nTranslation.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import BaseCustomElement from "./BaseCustomElement"

/** Manages a translation based on a key and value, with the value potentially having interpolation.
 *
 * This is intended to be server-rendered with the subset of keys the server manages that are relevant
 * to the front-end.  Any other code on the page can then locate an element with the desired key and
 * call `translation` to get the human-readable key.  It is assumed that the server would render
 * in the language required by the visitor, so there is no need to first select by locale.
 *
 * @property {string} key - an i18n key, presumably dot-delimited, however it can be any valid attribute value.
 * @property {string} value - the value of the key, in the browser's locale. It may contain placeholders for interpolation using `%{«placeholder»}` syntax.
 *
 * @example
 * &lt;brut-i18n-translation key="greeting" value="Hello %{username}">&lt;/brut-i18n-translation>
 *
 * @customElement brut-i18n-translation
 */
class I18nTranslation extends BaseCustomElement {
  static tagName = "brut-i18n-translation"

  static observedAttributes = [
    "show-warnings",
    "key",
    "value",
  ]

  #key = null
  #value = ""

  keyChangedCallback({newValue}) {
    this.#key = newValue
  }

  valueChangedCallback({newValue}) {
    this.#value = newValue ? String(newValue) : ""
  }

  /**
   * Called by other JavaScript to get the translated string.
   * @param {Object} interpolatedValues - Object where the keys are placeholders in the string for interpolation and the values are
   * the values to replace.  Placeholders not in the translated value are ignored. Missing placeholders won't cause an error, but the
   * placeholder will be present verbatim in the translated string.
   *
   * @example
   * const element = document.querySeletor("brut-i18n-translation[key='greeting']")
   * if (element) {
   *   const translation = element.translation({ username: "Pat" })
   *   alert(translation) // Shows 'Hello Pat'
   * }
   */
  translation(interpolatedValues) {
    return this.#value.replaceAll(/%\{([^}%]+)\}/g, (match,key) => {
      if (interpolatedValues[key]) {
        return interpolatedValues[key]
      }
      return match
    })
  }

}
export default I18nTranslation
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-testing.html">testing</a></li></ul><h3>Externals</h3><ul><li><a href="external-CustomElementRegistry.html">CustomElementRegistry</a></li><li><a href="external-Performance.html">Performance</a></li><li><a href="external-Promise.html">Promise</a></li><li><a href="external-ValidityState.html">ValidityState</a></li><li><a href="external-Window.html">Window</a></li><li><a href="external-fetch.html">fetch</a></li></ul><h3>Classes</h3><ul><li><a href="AjaxSubmit.html">AjaxSubmit</a></li><li><a href="Autosubmit.html">Autosubmit</a></li><li><a href="BaseCustomElement.html">BaseCustomElement</a></li><li><a href="BrutCustomElements.html">BrutCustomElements</a></li><li><a href="BufferedLogger.html">BufferedLogger</a></li><li><a href="ConfirmSubmit.html">ConfirmSubmit</a></li><li><a href="ConfirmationDialog.html">ConfirmationDialog</a></li><li><a href="ConstraintViolationMessage.html">ConstraintViolationMessage</a></li><li><a href="ConstraintViolationMessages.html">ConstraintViolationMessages</a></li><li><a href="CopyToClipboard.html">CopyToClipboard</a></li><li><a href="Form.html">Form</a></li><li><a href="I18nTranslation.html">I18nTranslation</a></li><li><a href="LocaleDetection.html">LocaleDetection</a></li><li><a href="Logger.html">Logger</a></li><li><a href="Message.html">Message</a></li><li><a href="PrefixedLogger.html">PrefixedLogger</a></li><li><a href="RichString.html">RichString</a></li><li><a href="Tabs.html">Tabs</a></li><li><a href="Tracing.html">Tracing</a></li><li><a href="testing.AssetMetadata.html">AssetMetadata</a></li><li><a href="testing.AssetMetadataLoader.html">AssetMetadataLoader</a></li><li><a href="testing.CustomElementTest.html">CustomElementTest</a></li><li><a href="testing.DOMCreator.html">DOMCreator</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Jul 16 2025 21:21:26 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
